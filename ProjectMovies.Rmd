---
title: "test"
output: html_document
date: "2025-02-20"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(janitor)
```


## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
netflix <- read_csv("data/netflix_titles.csv")
```

```{r}
imdb_top_1000 <- read_csv("data/imdb_top_1000.csv") %>% clean_names()
```

```{r}
imdb_top_1000 %>% 
  group_by(director) %>% 
  summarize(avg_rating=mean(imdb_rating)) %>% 
  arrange(-avg_rating)
```


Laiba:

```{r}
colnames(netflix)
```
```{r}
summary(netflix)
```
```{r}
glimpse(netflix)
```


```{r}
netflix_clean <- netflix %>% 
  separate(date_added, into= c("day_added","year_added"), sep = ", ") %>% 
  mutate(
    num = as.numeric(str_extract(duration, "\\d+")),  # Extract numeric values
    duration_mins = case_when(
      str_detect(duration, "Season") ~ num * 450,  # Convert seasons to estimated minutes
      str_detect(duration, "min") ~ num)) %>%
  select(-num, -show_id)
  
  
```


```{r}
netflix %>% 
  filter(str_detect(listed_in,"International Movies")) %>% 
  group_by(country) %>% 
  summarize(total=n_distinct(title)) %>% 
  arrange(-total) %>% 
  top_n(11, total) %>% 
  ggplot(aes(x=reorder(country, total), y=total, fill=country)) +
  geom_col()+
  coord_flip()+
  labs(title="Top 10 Countries with International Movies on Netflix",
       x="Country",
       y="Movies")

```

```{r}
colnames(netflix)
```

```{r}
netflix %>% 
  filter(country=="United States") %>% 
  filter(rating %in% c("UR","TV-Y7-FV", "TV-Y", "TV-PG", "TV-MA", "TV-G", "TV-14", "R", "PG-13", "PG", "NR", "NC-17", "G" )) %>% 
  ggplot(aes(x=rating, fill=rating))+
  geom_bar()+
  coord_flip()+
  labs(title= "Number of Movies by Rating in the United States")
```
```{r}
netflix %>% 
  filter(country!="United States") %>% 
  filter(rating %in% c("UR","TV-Y7-FV", "TV-Y", "TV-PG", "TV-MA", "TV-G", "TV-14", "R", "PG-13", "PG", "NR", "NC-17", "G" )) %>% 
  ggplot(aes(x=rating))+
  geom_bar()+
  coord_flip()+
  labs(title= "Number of Movies by Rating in ")
```


```{r}
netflix_clean %>%
  mutate(year_added = as.numeric(year_added)) %>% 
  filter(!is.na(year_added)) %>%
  group_by(year_added) %>%
  summarise(count = n()) %>% 
  ggplot(aes(x = year_added, y = count)) +
  geom_line(color = "pink", size = 0.5) +
  geom_point(color = "red", size = 2) +
  labs(title = "Netflix Content Growth Over Time", x = "Year", y = "Number of Titles") +
  theme_minimal()
```

```{r}
#LONGEST and shortest on netflix
```

```{r}
# doesnt work 
netflix %>%
  filter(str_detect(title, "2 |3 |4 |Reboot |Remake |Return |Reunion |Part "))
  
```

```{r}
 netflix %>%
  select(title, rating, release_year) %>% 
  mutate(decade = floor(release_year / 10) * 10) %>% 
  count(decade, rating, sort = TRUE) %>% 
  ggplot(aes(x=decade, y=n, fill=rating))+
    geom_col()+
  scale_y_log10()

```

```{r}
# density plot of durations
netflix_clean %>% 
ggplot(aes(x = duration_mins)) +
  geom_density(fill = "lightblue", alpha = 0.6) +
  labs(title = "Distribution of Movie Durations", x = "Duration (mins)", y = "Density") +
  theme_minimal()
```

```{r}
library(lubridate)
```

```{r}
# heatmap of releases, fix axis titles on x
netflix_clean %>%
  separate(day_added, into= c("month_added","date_added"), sep = " ") %>% 
  count(year_added, month_added) %>% 
# Plot heatmap
ggplot(aes(x = month_added, y = year_added, fill = n)) +
  geom_tile() +
  labs(title = "Netflix Releases by Year and Month", x = "Month", y = "Year", fill = "Number of Titles") +
  theme_classic()+
  coord_flip()+
  theme(axis.text.x=element_text(angle=60, hjust=1))
```







Hareem:
```{r}

```





















